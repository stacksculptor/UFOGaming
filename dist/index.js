"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.newRidgeState=void 0;const react_1=require("react"),useIsomorphicLayoutEffect="undefined"!=typeof window||"undefined"!=typeof document?react_1.useLayoutEffect:react_1.useEffect,equ=(e,t)=>e===t,FR={};function useComparator(e,t=equ){const r=(0,react_1.useRef)(FR);let u=r.current;return useIsomorphicLayoutEffect(()=>{r.current=u}),u=r.current!==FR&&t(e,r.current)?u:e}function newRidgeState(e,u){let n=[],o=e;function c(e,t){const r=o;o=e instanceof Function?e(o):e,setTimeout(()=>{n.forEach(e=>e(o,r)),t?.(o,r),u?.onSet?.(o,r)})}function s(t){return n.push(t),()=>{n=n.filter(e=>e!==t)}}function a(){var e,[t,r]=(0,react_1.useState)(o);return e=r,useIsomorphicLayoutEffect(()=>s(e),[e]),[t,c]}return{use:a,useSelector:function(e,t=equ){var[r]=a();return useComparator(e(r),t)},useValue:()=>a()[0],get:()=>o,set:c,reset:()=>c(e),subscribe:s}}exports.newRidgeState=newRidgeState;